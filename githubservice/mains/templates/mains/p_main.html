{% load static %}
{% block style %}
{% endblock  %}
{% block content %}
<!--template modal detail-->
<div class="row">
  <!--template detail img-->
  <div class="col-4">
    <img src="{% static 'mains/images/portfolio1.png' %}" class="card-img-top">
  </div>
  {% comment %} <!--template detail 댓글-->
  <div class="col-6">
  <!-- 댓글 -->
  {% for comment in comments %}
    <p>{{ comment.content }}</p>
    <!-- 대댓글 리스트 -->
    {% for reply in comment.replies.all %}
      <p>{{ reply.content }}</p>
    {% endfor %}
    <!-- 대댓글 form -->
    {% if request.user.is_authenticated %}
      <a class="btn" href="#collapseExample-{{comment.pk}}">대댓글 작성</a>
      <div class="mt-2" id="collapseExample-{{comment.pk}}">
        <form action="{% url 'posts:comment_create' post.pk %}" method="POST">
          <input type="hidden" name="parent_pk" value="{{ comment.pk }}">
          {% csrf_token %}
          <div class="form-row">
            {% for field in comment_form %}
              {{ field.errors }}
              <div class="input-group input-group-sm col-8 mb-2 my-1">
                <div class="input-group-prepend">
                  <div class="input-group-text"> {{ comment.content }}</div>
                </div>
                {{ field }}
              </div>
            {% endfor %}
            <div class="col-auto mb-2 my-1">
              <button type="submit" class="btn btn-success btn-sm col-auto">대댓글</button>
            </div>
          </div>
        </form>
      </div>
    {% endif %}
    <hr>
  {% empty %}
    <p><small class="text-muted">댓글이 없어요.</small></p>
  {% endfor %}

  <!-- 댓글 작성 form -->
  {% if request.user.is_authenticated %}
    <form action="{% url 'mains:comment_create' post.pk %}" method="POST">
      {% csrf_token %}
      {% for field in comment_form %}
        <div class="form-row align-items-center justify-content-between">
          <div class="col-8 col-md-10 my-1">
            {{ field.errors }}
            {{ field }}
          </div>
          <div class="col-auto my-1">
            <button class="btn btn-primary btn-sm">Submit</button>
          </div>
        </div>
      {% endfor %}
    </form>
  {% else %}
    <a href="{% url 'accounts:login' %}">댓글을 작성하려면 로그인 하세요.</a>
  {% endif %}
  
  </div> {% endcomment %}
</div>

{% endblock content %}
